\section{Detailed Design Goals}
\label{sect:goals}

The primary goals of this design are:

\begin{itemize}
\item
  \textbf{Decentralised Governance:}
  Support a decentralised governance mechanism for Cardano.
\item
  \textbf{Genesis Key Retirement:}
  Remove the dependence of the Cardano blockchain on a small set of genesis keys/delegates.
\item
  \textbf{Security:}
  Maintain the security of the Cardano network.
\item
  \textbf{Progress:}
  Ensure that the blockchain protocol can evolve in the necessary way.
\item
  \textbf{Smooth Transition:}
  Evolve smoothly from the current federated governance
\end{itemize}

Where these goals conflict, it is, of course, absolutely essential to maintain the security of the network.  Maintaining progress/enabling
evolution is also important, since otherwise governance decisions will be ineffectual/not enacted.

\pagebreak
\subsection{Overall Governance Goals}

A primary reason for decentralisation is to ensure long-term compliance with emergent and evolving international financial regulations.
Secondary reasons include improved community engagement, alignment of decision-making authority with increased responsibility for maintaining the blockchain,
ensuring the long term stability of the Cardano blockchain.  Decentralisation means that decisions about the operation and evolution of the blockchain
should be taken collectively by a representive group of stakeholders.
%
Achieving these goals requires that:

\begin{itemize}
\item
  The governance process is transparent -- the progress of decisions can be monitored and any deviations are properly explained to stakeholders.
\item
  All opinions are considered (even if they are not acted upon).
\item
  Control of the blockchain rests with those who have the greatest direct stake in the operation of the blockchain either as holders of ada or as maintainers of the blockchain.
\item
  Control of the blockchain is not unduly concentrated -- small, unrepresentative groups of powerful individuals should not be able to take over the operation
  of the blockchain.
\item
  The blockchain is robust to change -- it should be possible to recover from an incorrect governance decision, and any changes that are implemented will not expose the blockchain to attack.
\item
  The mechanisms that are implemented will properly incentivise stakeholders to take decisions that are in the best long-term interest of the blockchain, as well as in their own long-term interest.
\item
  There are checks and balances to ensure that technical knowledge and advice is properly considered as part of the decision making and implementation process.
  This is especially important where there are security concerns.
\item
  There is traceable continuity in the blockchain -- that is, there is an on-chain record of all the changes that are made, including the outcomes of on-chain voting, endorsement, and proposal enactment.
\item
  The transitional path to decentralised governance is clearly identified and explained, with clear steps and gates to achieving the required level of decentralisation.
\end{itemize}


It is, of course, not necessary (or probably even sensible) for every aspect of
the process to be \emph{fully decentralised}, only that
\begin{inparaenum}
\item
  the ultimate \emph{control} of
the blockchain is decentralised to the extent that is required for effective
governance/regulatory compliance, and
\item
  decentralised governance decisions are \emph{enacted} faithfully and in the
  long-term interest of the blockchain.
\end{inparaenum}
In particular, the process must not exclude those who
are less technically expert, but must properly consider technical concerns.

\subsection{Off-Chain Requirements}

There are many legitimate ways to meet the off-chain governance
requirements. Appendix~\ref{sect:off-chain} considers some of the issues that
are involved.  Since this document focuses primarily on the on-chain technical
design requirements that relate to the enactment of proposals, off-chain
requirements will not be covered in detail here.

\pagebreak
\subsection{On-Chain Requirements}

On-chain requirements may be split into mandatory and optional requirements.

\paragraph{Mandatory Requirements.}  The on-chain mechanism must:

\begin{enumerate}
\item
  allow changes to be made to any updatable protocol parameter, in any valid way;
\item
  allow major/minor protocol versions to be upgraded, so enabling control over ``hard forks'';
\item
  allow the fulfilment of all kinds of ``central funds transfers'' to/from reserves/treasury pots;
\item
  not require the use of genesis keys or genesis key delegates in any part of the protocol;
\item
  allow separate per-proposal deadlines to be set for voting, endorsement and enactment;
\item
  ensure that deadlines are reasonable -- there is sufficient time for vote tallying, and parameter changes
  are enacted at specific epoch boundaries, for example;
% \item
%  allow an epoch to be chosen for enactment of a proposal;
\item
  be secure, so that users maintain trust in the integrity and stability of the blockchain;
\item
  be efficient, so that the primary economic purpose of the blockchain is not compromised by governance-related business;
\item
  meet all the necessary Cardano blockchain stability window requirements;
\item
  allow delegation of voting rights from ada holders to a dedicated group of delegates;
\item
  assign voting and endorsement rights in proportion to the amount of ada that is controlled by the corresponding ada holder/delegate/stake pool;
\item
  where the proposal changes the protocol version, verify that sufficient stake pools have upgraded to a compatible software version, in order to avoid causing unwanted chain forks;
\item
  prevent denial-of-service attacks by limiting the proposal submission rate;
\item
  avoid significant increases in memory and storage requirements in the node implementation;
\item
  avoid service interruptions by ensuring that computation for vote tallying etc does not impact normal block production;
\item
  automatically enact proposals at the stated epoch boundary, provided that the necessary voting and endorsement thresholds have both been met.
\end{enumerate}

\paragraph{Optional Requirements.}  In addition, the on-chain mechanism should:

\begin{enumerate}[resume]
\item
  allow multiple proposals to be in-flight and enacted in a single epoch;
\item
  resolve conflicts between proposals automatically (e.g. using temporal ordering\footnote{Taking into account that this can only be absolutely determined once the chain becomes stable}, or some other consistent and predictable mechanism)\footnote{Note: this assumes that voters are aware of all active proposals, and have sufficient technical knowledge to resolve conflicts themselves.  Although it would be possible for a proposal to explicitly declare a conflict set, this could not be relied on to give an accurate assessment, and on-chain detection of potential conflicts could be complex and inefficient. It might, however, be possible for a suitable UI to present potentially conflicting proposals to voters, with reasons, and allow them to take the final decision.};
\item
  (perhaps, allow different thresholds to be set for different kinds of proposal);
\item
  as far as possible, be consistent with the existing manual update and MIR mechanisms.
\end{enumerate}

\pagebreak
\subsection{Security Requirements}
\label{sect:security}

The primary security risks that have been identified are: subversion of votes by a small group; subversion of on-chain proposal submission; and denial-of-service.

\paragraph{Vote Subversion.}
An attacker may obtain control of the blockchain by pooling votes as a delegate (or as part of a voting bloc), and then proceed to enact proposals that act against the interest of the blockchain, or to block
proposals that are in the general interest.   This attack is mitigated by:
  \begin{inparaenum}
  \item
    requiring endorsement of protocol changes by stake pools, so that multiple distinct stakeholder groups are required to enact a proposal;
  \item
    ensuring that voter and stake pool groups are distinct, and there is independent delegation for voting and block production;
  \item
    setting high thresholds for vote acceptance, and basing these thresholds on active participation;
  \item
    ensuring that all ada holders can easily participate in vote delegation, including setting low costs for participation and not locking tokens\footnote{This has been shown to reduce voter participation};
  \item
    never permanently transferring voting rights to delegates, and allowing vote delegation to be easily changed by the ada holder;
  \item
    separating submitter and delegate groups;
  \item
    providing tracking mechanisms to tie on-chain proposals to properly debated off-chain discussion and voting.
  \end{inparaenum}

  As with block production, it may also be necessary to limit the total amount of ada (and therefore vote) that can be controlled by a single delegate.
  This issue is not addressed by the current design\footnote{The obvious approach is to ensure a minimum number of delegates, and to tie this to
    some incentives mechanism, as with block production, but this has not been studied.}.

\paragraph{Subversion of On-Chain Submissions.}
Only properly submitted and signed proposals will be enacted.  An attacker could gain control of the blockchain by controlling the submission process through
subverting members of the submitter group.
%
This attack is mitigated by:
  \begin{inparaenum}
  \item
    Setting a sufficiently large quorum\pkcomment{This needs to be balanced, of course; setting the quorum too high can make it hard to make progress}\khcomment{Agreed!} for counter-signing proposal submission;
  \item
    Making the submitter group sufficiently large that it becomes difficult to exert control;
  \item
    Separating submitter and delegate groups, so that proposals are not enacted without scrutiny;
  \item
    Linking off-chain and on-chain proposals, so that it is clear when a proposal has not followed proper process;
  \item
    Designing an election process that allows submitters to be replaced where they are not acting in the best interest of the community.
  \end{inparaenum}


\paragraph{Denial of Service.}
By flooding the system with bad proposals (including ones that have a long voting or enactment deadlines), it becomes difficult to identify the
proposals that need to be progressed.
Large numbers of in-flight proposals will also impact timing and memory performance, and perhaps prevent transaction submission, so reducing
the effectiveness of the blockchain as a whole.
%
This attack is mitigated by:
  \begin{inparaenum}
  \item
    Restricting the size of the submitter group;
  \item
    Requiring a sufficient quorum of counter-signatures for each proposal;
  \item
    Tying on-chain proposals to off-chain discussion;
  \item
    Ensuring that only valid proposals are submitted;
  \item
    Restricting deadlines, so that they cannot be too far in the future.
  \end{inparaenum}
  It would also be possible to e.g. charge fees for proposal submission (perhaps on a refundable basis if the proposal was accepted);
  to filter new proposals so that only sufficiently different proposals could be submitted.

\pagebreak
\subsection{Performance Requirements}
\label{sect:performance}

The solution must:

\begin{enumerate}
\item
  avoid significant increases in memory requirements over previous versions of the node software;
\item
  avoid significant impact on normal block production times, for example by requiring excessive indivisible processing at specific times;
\item
  avoid significant increases in transaction volumes.
\end{enumerate}

A particular concern is over increased costs at the epoch boundary.
%
Suitable performance mitigations include:

\begin{enumerate}
\item
  Limiting the number of simultaneously active proposals through a small submitter group
  -- this will, in turn, reduce the number of votes that need to be tallied (time and memory),  the number of proposals that need to be recorded (memory), and the number of proposals that need to be enacted at an epoch boundary (time);
\item
  Using a delegate system to reduce the number of vote-related transactions (network);
\item
  Tallying votes in the background, so that normal block production and verification is not affected (time);
\item
  Requiring vote and endorsement outcomes to be calculated sufficiently ahead of the epoch boundary (time and memory);
\item
  Processing parameter update and protocol upgrade enactments ahead of the epoch boundary (e.g. as a ``shadow state'' that could then permit an atomic update to the protocol parameters);
\item
  Processing central funds transfers lazily after the epoch boundary (this is consistent with the current approach to MIR transfers).
\end{enumerate}
